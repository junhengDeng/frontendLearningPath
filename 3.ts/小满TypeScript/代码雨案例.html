<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta
    name="viewport"
    content="width=device-width, initial-scale=1.0"
  >
  <title>代码雨</title>
</head>

<body>
  <canvas id="canvas"></canvas>
  <script>
    (() => {
      window.onload = function () {
        let canvas = document.querySelector('#canvas');
        console.log(canvas, 'canvas')
        let ctx = canvas.getContext('2d');
        canvas.height = screen.availHeight;
        canvas.width = screen.availWidth;
        let str = 'XMZSWSSBXMZSWSSBXMZSWSSBXMZSWSSBXMZSWSSB'.split('')
        let Arr = Array(Math.ceil(canvas.width / 10)).fill(0)

        const rain = () => {
          ctx.fillStyle = 'rgba(0, 0, 0, 0.05)';// 填充背景
          ctx.fillRect(0, 0, canvas.width, canvas.height); // 背景
          ctx.fillStyle = '#0f0'; // 文字颜色
          Arr.forEach((item, index) => {
            if (index === 0) {
              ctx.fillText(str[Math.floor(Math.random() * str.length)], index * 10, item + 10);
              Arr[index] = item >= (canvas.height || (item > (10000 * Math.random()))) ? 0 : item + 10;
            }
          })
        }

        setInterval(rain, 40)
      }
    })()
  </script>
</body>

</html>